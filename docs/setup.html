<html>
<head>
<title>Setup</title>
</head>
<body
<h1>Setup</h1>

<p>Configuration for debian-cd is stored in the file CONF.sh. This
file is a shell script that is sourced in by the build scripts;
options are set up in the file using standard shell syntax for
environment variable handling.</p>

<p>The file that is shipped by default with debian-cd is
well-commented, but is rather large and may be initimidating to new
users. There are <strong>lots</strong> of options, but most of them
have sane defaults and can be ignored in common use.</p>

<h2>Necessary configuration</h2>

<p>The key options that would always be configured by a user are:</p>

<ul>
<li><code>CODENAME</code> - typically "sarge", "etch" or "sid"
<li><code>DEBVERSION</code> - the version number to go with that codename
<li><code>OFFICIAL</code> - do <strong>not</strong> claim to be making official Debian CDs here!
<li><code>MIRROR</code> - specify the absolute path to your mirror of the Debian archive
<li><code>TDIR</code> - a path to a temporary directory; should be on the same filesystem as <code>MIRROR</code> so that hard links work
<li><code>OUT</code> - the directory where ISO images and/or jigdo files will be created
<li><code>APTTMP</code> - another temporary directory for layout code; can live anywhere
</ul>

<p>Setting these options is sufficient to allow creation of a standard
set of CDs for your architecture, that should look very similar to the
official Debian builds. To actually start the build for one
architecture, run <code>build.sh $ARCH</code>. To build for more
architectures, run <code>build_all.sh</code>.</p>

<h2>More advanced configuration</h2>

<p>A larger set of options that might be commonly tweaked by users
wanting to make different images include:</p>

<ul>
<li><code>DI_WWW_HOME</code> - specify the location of d-i boot images to go on the first CD rather than the default ones from the mirror
<li><code>CONTRIB</code> - whether or not to allow packages from the contrib section onto the CDs
<li><code>NONFREE</code> - whether or not to allow packages from the non-free section onto the CDs
<li><code>EXTRANONFREE</code> - like <code>NONFREE</code>, but sort the non-free packages to a separate last CD instead of mixing them in
<li><code>LOCAL</code> - if you have a local set of packages that you want to merge into your CDs, specify the location here. The location should look just like the other sections (main, contrib, non-free) with Packages files etc.
<li><code>DEFBINSIZE</code> - the <strong>approximate</strong> target size of a binary image, in megabytes. See <a href="conf.sh.html">CONF.sh</a> for more details on how this works.
<li><code>DEFSRCSIZE</code> - the <strong>approximate</strong> target size of a source image, in megabytes. See <a href="conf.sh.html">CONF.sh</a> for more details on how this works.
<li><code>EXCLUDE</code> - specifies a file listing packages that should be omitted from consideration when laying out the CDs
<li><code>UNEXCLUDE$N</code> - a way to re-add excluded packages back into the set, starting with CD number $N. Using <code>EXCLUDE</code> and <code>UNEXCLUDE</code> allows some finer-grained control of package placement if desired
<li><code>DOJIGDO</code> - specify what to create: 0 means ISOs only; 1 means ISOs and jigdo files; 2 means jigdo files only
<li><code>JIGDOFALLBACKPATH</code> - if you're publishing jigdo files, you may specify a location here and debian-cd will create a snapshot tree for you
<li><code>JIGDOFALLBACKURLS</code> - this is how to specify the URL that the <code>JIGDOFALLBACKPATH</code> corresponds to
<li><code>UDEB_INCLUDE</code> - a file listing installer udebs that should be pushed into the install system
<li><code>UDEB_EXCLUDE</code> - opposite of <code>UDEB_INCLUDE</code>
<li><code>BASE_INCLUDE</code> - a file listing packages that should be installed onto the target system by d-i
<li><code>BASE_EXCLUDE</code> - packages that should <strong>not</strong> be installed
<li><code>INSTALLER_CD</code> - use this to specify the type of disc to create: 0 means a normal CD/DVD set; 1 means a "business card", i.e. just d-i and no packages; 2 means a "netinst", i.e. d-i and the base system only
<li><code>MAXCDS</code> - a way to limit how many CDs will be built; this won't force packages to fit, but will simply cut off the build once the specified number are done
<li><code>SPLASHPNG</code> - specify the image to be used on the boot splash screen, on architectures where this is supported
</ul>

<p>If you do tweak some of these options, especially image sizes, it
may take quite a few iterations of testing to get exactly what you're
looking for...</p>

<a href="requirements.html">Prev - debian-cd requirements</a><br>
<a href="conf.sh.html">Next - Full details of CONF.sh configuration</a>
</body>
</html>
